<!DOCTYPE html>
<html><head>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta charset="utf-8">
  <meta name="generator" content="Google Web Designer 16.0.3.0320">
  <meta name="template" content="Banner 3.0.0">
  <meta name="environment" content="gwd-dv360">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="gwdpage_style.css" rel="stylesheet" data-version="13" data-exports-type="gwd-page">
  <link href="gwdpagedeck_style.css" rel="stylesheet" data-version="14" data-exports-type="gwd-pagedeck">
  <link href="gwdgooglead_style.css" rel="stylesheet" data-version="9" data-exports-type="gwd-google-ad">
  <link href="gwdimage_style.css" rel="stylesheet" data-version="17" data-exports-type="gwd-image">
  <style id="gwd-lightbox-style">.gwd-lightbox {
    overflow: hidden;
}</style>
  <style id="gwd-text-style">p {
    margin: 0px;
}
h1 {
    margin: 0px;
}
h2 {
    margin: 0px;
}
h3 {
    margin: 0px;
}</style>
  <style>html,
body {
    width: 100%;
    height: 100%;
    margin: 0px;
}
.gwd-page-container {
    position: relative;
    width: 100%;
    height: 100%;
}
.gwd-page-content {
    background-color: transparent;
    transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    -moz-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    perspective: 1400px;
    -webkit-perspective: 1400px;
    -moz-perspective: 1400px;
    position: absolute;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
}
.gwd-page-content * {
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
}
.gwd-page-wrapper {
    background-color: rgb(255, 255, 255);
    position: absolute;
    transform: translateZ(0px);
    -webkit-transform: translateZ(0px);
    -moz-transform: translateZ(0px);
}
.gwd-page-size {
    width: 750px;
    height: 1300px;
}
.gwd-span-1yov {
    position: absolute;
    font-family: Rubik;
    width: 406px;
    height: 71px;
    color: rgb(73, 73, 73);
    font-weight: normal;
    line-height: 35px;
    font-size: 45px;
    left: 74px;
    top: 102px;
}
.gwd-h1-3kxs {
    position: absolute;
    width: 180.333px;
    height: 36.3333px;
    font-family: Rubik;
    font-weight: normal;
    font-size: 32px;
    color: rgb(108, 108, 108);
    left: 109px;
    top: 171px;
}
.gwd-h2-1qta {
    position: absolute;
    width: 138px;
    height: 36.3281px;
    font-family: Rubik;
    font-size: 32px;
    font-weight: normal;
    color: rgb(108, 108, 108);
    left: 112px;
    top: 613px;
}
.gwd-imagebutton-pg4y {
    position: absolute;
    width: 550px;
    height: 100px;
    left: 109px;
    top: 1030px;
}
.gwd-div-xgq1,
.gwd-div-1wwi {
    overflow: auto;
    position: absolute;
    display: flex;
    flex-flow: wrap;
    gap: 20px;
    height: 350px;
    top: 242px;
    left: 130px;
    width: 505px;
}
.delbutton {
    border: none;
    background: none;
    padding: 0px;
    margin: 0px;
    font-style: inherit;
    font-variant: inherit;
    font-stretch: inherit;
    font-size: inherit;
    line-height: inherit;
    font-family: inherit;
    font-optical-sizing: inherit;
    font-kerning: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    color: inherit;
    cursor: pointer;
    outline: none;
    font-weight: 500;
}
.subject {
    background-color: rgb(172, 226, 255);
    color: rgb(108, 108, 108);
    border-radius: 15px;
    border: none;
    margin: 0px;
    font-style: inherit;
    font-variant: inherit;
    font-stretch: inherit;
    line-height: inherit;
    font-family: Rubik;
    font-size: 14px;
    cursor: pointer;
    outline: none;
    font-weight: 500;
    padding: 10px;
}
.tagdiv {
    background-color: rgb(255, 192, 203);
    height: 20px;
    padding: 20px;
    border-radius: 10px;
    font-family: Rubik;
    font-size: 20px;
    color: rgb(108, 108, 108);
    display: flex;
    flex-flow: wrap;
    gap: 10px;
}
.fetchdiv {
    background-color: rgb(122, 214, 112);
    height: 20px;
    padding: 20px;
    border-radius: 10px;
    font-family: Rubik;
    font-size: 12px;
    color: rgb(108, 108, 108);
    display: flex;
    flex-flow: wrap;
    gap: 10px;
}
.gwd-div-1wwi {
    overflow: auto;
    position: absolute;
    display: flex;
    flex-flow: wrap;
    gap: 20px;
    width: 505px;
    height: 200px;
    left: 139px;
    top: 808px;
}
.gwd-input-z5ug {
    position: absolute;
    width: 420px;
    background-image: none;
    border-width: 0px;
    height: 34px;
    background-color: rgba(0, 0, 0, 0);
    left: 176px;
    top: 232px;
}
.gwd-div-11q1 {
    height: 270px;
    left: 130px;
    top: 290px;
}
.gwd-input-ppx2 {
    position: absolute;
    width: 420px;
    background-image: none;
    background-color: rgba(0, 0, 0, 0);
    border-width: 0px;
    height: 34px;
    top: 673px;
    left: 169px;
}
.gwd-div-bncx {
    position: absolute;
    overflow: auto;
    display: flex;
    flex-direction: column;
    gap: 5px;
    width: 475px;
    height: 68px;
    left: 139px;
    top: 732px;
}
.gwd-image-1eey {
    position: absolute;
    left: 217px;
    top: 396px;
    width: 1316px;
    height: 144px;
    transform: translate3d(-491px, -212px, 0px) scale3d(0.4, 0.4, 0.4);
    -webkit-transform: translate3d(-491px, -212px, 0px) scale3d(0.4, 0.4, 0.4);
    -moz-transform: translate3d(-491px, -212px, 0px) scale3d(0.4, 0.4, 0.4);
}
.gwd-image-to8x {
    position: absolute;
    left: 217px;
    top: 396px;
    width: 1316px;
    height: 144px;
    transform: translate3d(-494px, 227px, 0px) scale3d(0.4, 0.4, 0.4);
    -webkit-transform: translate3d(-494px, 227px, 0px) scale3d(0.4, 0.4, 0.4);
    -moz-transform: translate3d(-494px, 227px, 0px) scale3d(0.4, 0.4, 0.4);
}
.gwd-image-yr99 {
    position: absolute;
    width: 1323px;
    height: 214px;
    left: 89px;
    top: 816px;
    transform: translate3d(-375px, -152px, 0px) scale3d(0.36, 0.36, 0.36);
    -webkit-transform: translate3d(-375px, -152px, 0px) scale3d(0.36, 0.36, 0.36);
    -moz-transform: translate3d(-375px, -152px, 0px) scale3d(0.36, 0.36, 0.36);
}
.gwd-image-1j5u {
    position: absolute;
    width: 152px;
    height: 50px;
    top: 41px;
    left: 582px;
}
.gwd-image-d60w {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 750px;
    height: 1300px;
}</style>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:regular|Rubik:700,regular,500" rel="stylesheet" type="text/css">
  <script data-source="gwd_webcomponents_v1_min.js" data-version="2" data-exports-type="gwd_webcomponents_v1" src="gwd_webcomponents_v1_min.js"></script>
  <script data-source="gwdpage_min.js" data-version="13" data-exports-type="gwd-page" src="gwdpage_min.js"></script>
  <script data-source="gwdpagedeck_min.js" data-version="14" data-exports-type="gwd-pagedeck" src="gwdpagedeck_min.js"></script>
  <script data-source="https://s0.2mdn.net/ads/studio/Enabler.js" data-exports-type="gwd-google-ad" src="https://s0.2mdn.net/ads/studio/Enabler.js"></script>
  <script data-source="gwdgooglead_min.js" data-version="9" data-exports-type="gwd-google-ad" src="gwdgooglead_min.js"></script>
  <script data-source="gwdimage_min.js" data-version="17" data-exports-type="gwd-image" src="gwdimage_min.js"></script>
  <script data-source="gwdimagebutton_min.js" data-version="13" data-exports-type="gwd-imagebutton" src="gwdimagebutton_min.js"></script>
</head>

<body>
  <gwd-google-ad id="gwd-ad">
    <gwd-metric-configuration></gwd-metric-configuration>
    <gwd-pagedeck class="gwd-page-container" id="pagedeck">
      <gwd-page id="page1" class="gwd-page-wrapper gwd-page-size gwd-lightbox" data-gwd-width="750px" data-gwd-height="1300px">
        <div class="gwd-page-content gwd-page-size">
          <gwd-image id="gwd-image_2" source="Screenshot_2024-04-06_at_3.43.28_pm.png?1712378763862" scaling="stretch" class="gwd-image-d60w"></gwd-image>
          <h1 class="gwd-span-1yov" id="userName"></h1>
          <h2 class="gwd-h1-3kxs">interests</h2>
          <h2 class="gwd-h2-1qta">subjects</h2>
          <gwd-imagebutton id="gwd-imagebutton_1" up-image="save.png" over-image="" down-image="" scaling="cover" class="gwd-imagebutton-pg4y" onclick="saveUserData()"></gwd-imagebutton>
          <div class="gwd-div-xgq1 gwd-div-11q1" id="interests_div"></div>
          <gwd-image id="bar" source="bar.png?1712378763862" scaling="stretch" class="gwd-image-yr99"></gwd-image>
          <div class="gwd-div-1wwi" id="subjects_div"></div>
          <div class="gwd-div-bncx" id="subjectlist"></div>
          <gwd-image id="searchBar" source="searchBar.png?1712378763862" scaling="stretch" class="gwd-image-1eey"></gwd-image>
          <gwd-image id="searchBar_1" source="searchBar.png?1712378763862" scaling="stretch" class="gwd-image-to8x"></gwd-image>
          <input type="text" id="intquery" class="gwd-input-z5ug">
          <input type="text" id="subjquery" class="gwd-input-ppx2">
          <gwd-image id="gwd-image_1" source="Screenshot_2024-04-06_at_2.41.53_pm.png?1712378763862" scaling="stretch" class="gwd-image-1j5u"></gwd-image>
        </div>
      </gwd-page>
    </gwd-pagedeck>
  </gwd-google-ad>
  <script type="text/javascript" id="gwd-init-code">
    const path = "https://64797083-dd51-442c-a36f-84a92c6265df-00-30ipml1u64wqw.worf.replit.dev/"

    async function sendHTTPS(extension, body = {
      "key": "val"
    }, method = "POST") {
      let data = await fetch(
        path + extension, {
          method: method,
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(body)
        });
      let j = await data.json();
      return j;
    }




    var interestsDiv = document.getElementsByClassName("gwd-div-xgq1")[0];
    var subjectsDiv = document.getElementsByClassName("gwd-div-1wwi")[0];
    var subjectListDiv = document.getElementById("subjectlist")

    var currentInterests = []
    var currentSubjects = []

    function clearDisplay() {
      var divsToDelete = document.querySelectorAll("div.tagdiv");
      divsToDelete.forEach(function(div) {
        div.remove();
      });
    }

    function updateDisplay() {
      function interestRemove() {
        stringToRemove = String(this.parentNode.firstElementChild.textContent)
        currentInterests = currentInterests.filter(function(item) {
          return item !== stringToRemove;
        });
        this.parentNode.remove()
      }

      function subjectRemove() {
        stringToRemove = String(this.parentNode.firstElementChild.textContent)
        currentSubjects = currentSubjects.filter(function(item) {
          return item !== stringToRemove;
        });
        this.parentNode.remove()
      }

      for (var i = 0; i <= currentInterests.length - 1; i++) {
        var newDiv = document.createElement("div");
        newDiv.className = "tagdiv"
        var newText = document.createElement("text");
        newText.textContent = currentInterests[i]
        newDiv.appendChild(newText);
        var newButton = document.createElement("button");
        newButton.className = "delbutton"
        newButton.textContent = "X"
        newButton.onclick = interestRemove
        newDiv.appendChild(newButton)
        interestsDiv.appendChild(newDiv);
      }

      for (var i = 0; i <= currentSubjects.length - 1; i++) {
        var newDiv = document.createElement("div");
        newDiv.className = "tagdiv"
        var newText = document.createElement("text");
        newText.textContent = currentSubjects[i]
        newDiv.appendChild(newText);
        var newButton = document.createElement("button");
        newButton.className = "delbutton"
        newButton.textContent = "X"
        newButton.onclick = subjectRemove
        newDiv.appendChild(newButton)
        subjectsDiv.appendChild(newDiv);
      }

    }
    async function getUserData() {
      let x = await sendHTTPS("retrieveUserInfo", {
        'userId': '000001'
      })
      console.log(x)
      const subjects = x['userSubjects']
      const interests = x['userInterests']
      currentInterests = interests
      currentSubjects = subjects
      document.getElementById("userName").innerText = x['name']
      updateDisplay()
    }

    async function saveUserData() {
      let x = await sendHTTPS("saveUserInfo", {
        'userId': '000001',
        'interests': currentInterests,
        'subjects': currentSubjects
      })
    }

    function clearOptions() {
      var divsToDelete = document.querySelectorAll("button.subject");
      divsToDelete.forEach(function(div) {
        div.remove();
      });
    }

    async function updateOptions() { ///for the display of possible subjects
      clearOptions()
      let x = await sendHTTPS("searchSubjects", {
        'search': document.getElementById("subjquery").value
      })

      function appendSubject(element) {
        console.log(element.textContent)
        currentSubjects.push(element.textContent)
        clearDisplay()
        updateDisplay()
      }
      for (var i = 0; i <= x.length - 1; i++) {
        var newButton = document.createElement("button");
        newButton.className = "subject"
        newButton.textContent = x[i]
        newButton.onclick = function() {
          appendSubject(this)
        }
        console.log(x[i])
        subjectListDiv.appendChild(newButton)
      }



    }

    async function addInterest() {
      currentInterests.push(document.getElementById("intquery").value)
      document.getElementById("intquery").value = ""
      console.log(currentInterests)
      clearDisplay()
      updateDisplay()
    }


    document.getElementById("intquery").addEventListener("keyup", function(event) {
      if (event.keyCode === 13) {
        addInterest()
      }
    });
    document.getElementById("subjquery").addEventListener("keyup", function(event) {
      if (event.keyCode === 13) {
        updateOptions()
      }
    });
    (function() {
      var gwdAd = document.getElementById('gwd-ad');

      /**
       * Handles the DOMContentLoaded event. The DOMContentLoaded event is
       * fired when the document has been completely loaded and parsed.
       */

      function handleDomContentLoaded(event) {

      }

      /**
       * Handles the WebComponentsReady event. This event is fired when all
       * custom elements have been registered and upgraded.
       */
      function handleWebComponentsReady(event) {
        // Start the Ad lifecycle.
        requestAnimationFrame(function() {
          setTimeout(function() {
            gwdAd.initAd();
          }, 1);
        });
      }

      /**
       * Handles the event that is dispatched after the Ad has been
       * initialized and before the default page of the Ad is shown.
       */
      function handleAdInitialized(event) {
        getUserData()
      }

      window.addEventListener('DOMContentLoaded',
        handleDomContentLoaded, false);
      window.addEventListener('WebComponentsReady',
        handleWebComponentsReady, false);
      window.addEventListener('adinitialized',
        handleAdInitialized, false);
    })();
  </script>


<script data-exports-type="gwd-studio-registration">function StudioExports() {
}</script><script type="text/gwd-admetadata">{"version":1,"type":"GoogleAd","format":"","template":"Banner 3.0.0","politeload":false,"fullscreen":false,"counters":[],"timers":[],"exits":[],"creativeProperties":{"minWidth":750,"minHeight":1300,"maxWidth":750,"maxHeight":1300},"components":["gwd-google-ad","gwd-image","gwd-imagebutton","gwd-page","gwd-pagedeck","text"],"responsive":false}</script><script data-exports-type="dclk-quick-preview">studio.Enabler.setRushSimulatedLocalEvents(true);</script></body></html>
